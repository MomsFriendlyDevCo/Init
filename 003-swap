#!/bin/bash
# Set up a 4gb swap file using disk
# This is only really useful on Minimal-RAM systems
#
# NOTE: Use `free -h` to see swap file usage

source common

INIT status "Setting up Swap file"
sudo touch /var/swap.img
sudo chmod 0600 /var/swap.img
sudo fallocate -l 4G /var/swap.img
sudo dd if=/dev/zero of=/var/swap.img bs=4096 count=1048576
sudo mkswap /var/swap.img
sudo swapon /var/swap.img
echo "/var/swap.img    none    swap    sw    0    0" | sudo tee -a /etc/fstab >/dev/null
