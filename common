#!/bin/bash
# Common functionality library imported by all other scripts in this directory

# Set a flag to indicate that this script has already loaded
export INIT_READY=1

# Store the INIT base directory
export INIT_HOME=$(cd $(dirname "${BASH_SOURCE[0]}") && pwd)

# Force all scripts to use non-interactive DPKG prompts on install
export DEBIAN_FRONTEND=noninteractive

# Import the config
source config

# Call a utility function as sourced within the current shell
function INIT {
	UTIL="$1"
	shift
	"$INIT_HOME/utils/$UTIL" "$@"
}

# Expose INIT to all sub-shells
export -f -- INIT

# Quit on any error
set -e
